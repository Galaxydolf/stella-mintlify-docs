---
title: "クローラーの使い方ガイド"
---

クローラーツールは、特定のウェブサイトの情報を取得し、エージェントの機能と組み合わせて元データのさらなる加工処理を行うことを目的としています。これにより、ユーザーの利用シーンに対応した活用が可能になります。



具体的な利用手順は以下のとおりです：

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=M2YxZmQ4ZGI2NDkzMzczODdjMTFiZmM2NTVkNDE3NTdfMzZzYmJXWjZFRG9Wb1NvTERTR3c1MkVQRVFYNEwwMWxfVG9rZW46QVJnamJxaUszb0NQQjF4YVRXZmN2ZDVFbkxlXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)



# 1. ホームで「Web情報収集タスク新規作成」をクリックし、設定画面へ進みます。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=NWFmZjAwM2EzMDI2ZTBmODdkNjZmY2YxOTRmNWU0ZGFfVmFLVFJsaDROVnIzMVkzOERsM05hTzVCQ0k0TXNsTjhfVG9rZW46SnFKcmJhRTVYb25vdHZ4WkhFYWN1VFE3bk9mXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)



# 2. クローラー設定

次に、実際のウェブページを使って、クローラーツールの使用方法を説明します。

## Step 1：

対象のウェブページを設定します（例： http://www.cbssports.com/nba/）。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=MWIzOGM4Nzg0Y2ZiMTVjMDBjNzE0Y2M2MmE5OGI1OGVfZm5seFdtdTlVYVJkY3RDc3RsTkl0ZUFMMTJyUktjRXBfVG9rZW46Qnl5TmJsR05GbzVpTld4Q2tkZWNTN2RMblBkXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

## Step 2：

抽出するページ要素（フィールド）を設定します。

### 実例

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=YmEyODI2Y2QxYmYyMjk0MzYxODRmN2UyZTc2ZGI4YzFfd1ZoUmJ0SjRRRUVxMlJPRkhRYTB6bU0xVFhlU2h3dTRfVG9rZW46S2lTZWJORWp4b1NqV0h4ZjJyVmNCSllFbkxoXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)



### 機能説明

#### ケース設定例

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=OTBlZTdhMjhlNzc1NzcxZjNmZmIzMGU1MTQwYTA0YjZfMjVGWXp6dTRaVFExenh3UVcwQUFYM2YzWHc3WlpQOUpfVG9rZW46RjlOV2JjWWhrb2RBMVZ4bm1mZGNZMjZqbnJiXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)



#### 機能の詳細説明

##### 抽出フィールドの追加

このウェブページから、どのフィールドを取得するかを直接設定します。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRiMmNmNDFlMTgyZTdhZTg5NTNkMzc2OGI5NzY5NWZfRVVSSUdia2dNRzR5Tm1Ba0hTYXM2aUY2VUZEMmtCM1dfVG9rZW46T0RySWJra0Rpb3dhWm14WURiRmN0YjlSbndkXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

フィールドキー、フィールドの説明、フィールドの抽出ルール（通常は正規表現で記述）を明確に定義します。



**&#x20;抽出ルールはこちら：**

[ 爬虫指令脚本使用指南](https://yvrbb9678zj.feishu.cn/wiki/RwFewd9uDiMpIjkPhvZcCF0Unbc)



設定例：

| Webアドレス                                                                                                          | ルール                                                                                                                                                                                                                                     |
| ---------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ホームページURLhttps://www.szns.gov.cn/詳細ページURLhttps://www.szns.gov.cn/xxgk/qzfxxgkml/bmdt/content/post\_11320844.html | ・ホームページエリア設定操作：getHtml抽出方法：links抽出ルール：regex=>.*/content/.*&#x51E6;理方法：all・詳細ページのタイトルを抽出操作：getHtml抽出方法：xpath=>//div\[@class=tyxxy\_t']/h1/Text()処理方法：get・詳細ページの本文を抽出操作：getHtml抽出方法：xpath=>//div\[@class='tyxxy\_main']/allText()処理方法：get |

フィールドタイプは2種類：

1.string：内容を持つ一般的なテキスト項目（例：ページタイトルや本文など）

2.Webページ：対象ページ内にさらに抽出可能なページがある場合に使用。このタイプでは自動的に「抽出」ボタンが表示されます。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWFkZDI4MGUwYzQyYTY3OWIzNzI3OTkzYTczZWVjNGNfTURzT1BlTGEwb0h0c0xuNkhMNnExQmRoZG00ekcyVGNfVG9rZW46Q050bmJJZGZMb2FNZWp4TlJkQ2NoMlBrbjNjXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

&#x20;操作例（画像参照）

「抽出」をクリックすると、対象サイトの1階層下のページ構造が展開され、設定項目が追加されます。

「抽出のキャンセル」をクリックすると、下層の設定が削除されます。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRjMDRhM2IyZmRlZGViNjU1ZmUyNDU1MzYzZGY1YjBfV21XZTNZek96RkZHd0RXTlJ0VkMxVlNFNnQ5Y0ZFck9fVG9rZW46QktSMGJta0VZbzRoMWd4SnAyZGN5dnNrblhjXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)



##### エクスポート設定

本バージョンでは、エージェントへのエクスポートとHTTPエクスポートの2種類をサポートしています。



1\. エージェントへのエクスポート

エージェントへのエクスポートは、クローラーで取得した元データを、エージェントを通じてさらに加工・処理するために使用されます。実際の運用シーンでは、この機能がよりユーザーのニーズに適した形で活用されます。

例として、英語のWebページを翻訳してナレッジベースに保存するといった使い方が可能です。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=MjM5YjMxNmIxYzg1NDBlNmI4YjRmMWNkOGJhYzRhMDhfRHNNcFN4ZXRaMVlUMUg0YjhKMUdXQ3FUUGFrWWRBSnVfVG9rZW46R1Z1MWJuSXNHb01iTmd4RHg1YmNDQ0dkbnFmXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

エクスポート対象のエージェントは複数選択可能です。

###### エクスポート時凡例：

構造化データとしてエクスポートするため、バックエンドでは以下の2つの標準フィールドが定義されています：

・取得データ本体： \_state.data.xx

・データソースURL： \_state.url

※xxには、翻訳対象となるクローラー設定のフィールドキーを入力します。

例：クローラーで本文のフィールド名が content であれば、\_state.data.content を使用します。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=YTJmNmExMDA3M2FjYWNmNzczOTQ3ZjJjYTllZjkxMzJfSDBseFREWTN0cVA4YlVpaTlZUWladnhjNGxBOTlZcGtfVG9rZW46Rnl3QWJRTnNib1R2U3J4cm1NMmNXNUNobmhkXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

&#x20;ナレッジベースへの保存内容の詳細設定も可能です。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=NzUxZTlmYWZmZTJlOWYzY2JjOGI5NWJiYzBkNWM3NDRfZk1WV1F6bjVxMXVXeFVuWWp2YjFpYlZJQ1A2WkQ4RGhfVG9rZW46RXNJS2JOQW91b3I2RGt4Zjh0a2NMYkc2bjNiXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)



2\. HTTPへのエクスポート

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=YTA2NDc3NmRjMTQwMTZiZTRhMjgyZGU2NDdmNWNlZmRfbWMwMXB6ZEJoVDhFZ0dYUFhnVUhES3JuZ0V2UHZCY1BfVG9rZW46VFh2dmJERExYb2poMnN4ZjR6T2NERDl1bk5pXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

POSTリクエストによるAPI連携により、取得したデータを外部データベースや他のシステムへ直接送信できます。

**Step 3：**

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=MjRmZjI4ZDA2NjM3MWVjNGEzNmMxNGQ5ZjM4NDkzOWVfSDh6Rm1lTGVjZk1SdjkyN0p1c1N3SVBFWkpDQmJlWG1fVG9rZW46WjhZR2J3aUhGb3NTUDN4MHNhSWNERmZvbmljXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

「タスクを見る」をクリックすると、クローラータスク一覧ページへ戻ります。



## 3. クローラータスク管理

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=NGZhYTFjMzA3NDI5NDMyYmVmYmNjN2FhNWQ5MTUzZDhfaFpNWTc5bnFpSldXRDlzRjlPRTlTZ0NuSlVpOTlRdUpfVG9rZW46T1ZiQWJGSUxxb3dOMWV4SHVvSWNZMUoxbjQyXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

1\. 設定

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGJlOTBjNmY3YmYwZjNmZWQ3NTc1ZTRiOWY4M2QzYjZfT0FLaEJ0aUpBTWlKZDBIcm5JM05GRjRLOEwyNHc2cXFfVG9rZW46T1dhSGJDTjY0b3lKOHl4ZUtjV2NpcWtZbnNkXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

间隔时间可设置分钟、小时、天维度，作为定时轮训

・実行間隔の設定：分・時間・日単位で設定可能。定期的なポーリング実行に対応します。

・Cron式のカスタマイズ：Cron式を使用できる方は、自分で記述して柔軟なスケジュール設定が可能です。

　例：月・水・金にのみ実行など。

2\. 起動

・設定完了後、タスクを起動できます。

・起動後はいつでも停止可能ですが、「停止」は一時停止ではなく完全停止となるため、操作にはご注意ください。

3\. 編集と削除

起動中のタスクは、編集・削除・再設定はできません。

![](https://uxkpl4cba3j.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjdkYjNiNGVkMWNkZGZmYWZhZWM2NjQ4YmFkYTBlMTFfYnVzaUJWaFoyVUszSGhYWmVhSHV6STF2N0ZnYVExMWpfVG9rZW46VTZsb2JFSlNHb3BaVEp4eldaVWNFN3RYbmxmXzE3NDMwNDM4OTA6MTc0MzA0NzQ5MF9WNA)

